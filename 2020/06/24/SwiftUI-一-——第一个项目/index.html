<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="创建项目  唯一与我们从前使用storyboard不同的是，用户界面我们要选择用SwiftUI框架实现 初始文件 AppDelegate.swift包含用于管理您的应用程序的代码。在这里添加代码曾经很常见，但如今却很少见。 SceneDelegate.swift包含用于在应用程序中启动一个窗口的代码。这在iPhone上没有多大作用，但在iPad上（用户可以同时打开您的应用的多个实例），这很重要。">
<meta property="og:type" content="article">
<meta property="og:title" content="SwiftUI(一)——第一个项目">
<meta property="og:url" content="http://yoursite.com/2020/06/24/SwiftUI-%E4%B8%80-%E2%80%94%E2%80%94%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="sheny&#39;s blog">
<meta property="og:description" content="创建项目  唯一与我们从前使用storyboard不同的是，用户界面我们要选择用SwiftUI框架实现 初始文件 AppDelegate.swift包含用于管理您的应用程序的代码。在这里添加代码曾经很常见，但如今却很少见。 SceneDelegate.swift包含用于在应用程序中启动一个窗口的代码。这在iPhone上没有多大作用，但在iPad上（用户可以同时打开您的应用的多个实例），这很重要。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ae01.alicdn.com/kf/H70fd90f02eaf4f10a313dd9b96fc6b66W.png">
<meta property="article:published_time" content="2020-06-24T08:43:25.000Z">
<meta property="article:modified_time" content="2020-07-29T12:08:39.000Z">
<meta property="article:author" content="wshenY">
<meta property="article:tag" content="iOS">
<meta property="article:tag" content="swift">
<meta property="article:tag" content="SwiftUI">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ae01.alicdn.com/kf/H70fd90f02eaf4f10a313dd9b96fc6b66W.png">

<link rel="canonical" href="http://yoursite.com/2020/06/24/SwiftUI-%E4%B8%80-%E2%80%94%E2%80%94%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>SwiftUI(一)——第一个项目 | sheny's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">sheny's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-catalogue">

    <a href="/catalogues/" rel="section"><i class="fa fa-th-list fa-fw"></i>目录</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/24/SwiftUI-%E4%B8%80-%E2%80%94%E2%80%94%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wshenY">
      <meta itemprop="description" content="There are a lot of stories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sheny's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SwiftUI(一)——第一个项目
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-24 16:43:25" itemprop="dateCreated datePublished" datetime="2020-06-24T16:43:25+08:00">2020-06-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-29 20:08:39" itemprop="dateModified" datetime="2020-07-29T20:08:39+08:00">2020-07-29</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><img src="https://ae01.alicdn.com/kf/H70fd90f02eaf4f10a313dd9b96fc6b66W.png" alt="image.png" style="zoom:50%;" />

<p>唯一与我们从前使用storyboard不同的是，用户界面我们要选择用SwiftUI框架实现</p>
<h2 id="初始文件"><a href="#初始文件" class="headerlink" title="初始文件"></a>初始文件</h2><ul>
<li>AppDelegate.swift包含用于管理您的应用程序的代码。在这里添加代码曾经很常见，但如今却很少见。</li>
<li>SceneDelegate.swift包含用于在应用程序中启动一个窗口的代码。这在iPhone上没有多大作用，但在iPad上（用户可以同时打开您的应用的多个实例），这很重要。</li>
<li>ContentView.swift包含您程序的初始用户界面（UI），并且我们将在该项目中完成所有工作。</li>
<li>Assets.xcassets是<em>资产目录</em> –您要在应用程序中使用的图片的集合。您还可以在此处添加颜色，以及应用程序图标，iMessage贴纸等。</li>
<li>LaunchScreen.storyboard是一个可视化编辑器，用于创建一小段UI，以在应用程序启动时显示。</li>
<li>Info.plist是一个特殊值的集合，这些特殊值向系统描述了您的应用程序的工作方式–它是哪个版本，您支持的设备方向等等。不是代码，但仍然很重要的事情。</li>
<li>预览内容是一个黄色的组，其中包含Preview Assets.xcassets –这是另一个资产目录，这一次专门针对例如您在设计用户界面时要使用的图像，以使您了解它们在外观时的外观该程序正在运行。</li>
</ul>
<a id="more"></a>

<h2 id="创建表单"><a href="#创建表单" class="headerlink" title="创建表单"></a>创建表单</h2><p>许多应用程序要求用户输入某种输入-可能是要求他们设置一些首选项，可能是要求他们确认想要汽车接载的位置，或者是从菜单中订购食物，或者执行其他任何操作类似。</p>
<p>SwiftUI为此提供了专用的视图类型，称为<code>Form</code>。表单是静态控件（如文本和图像）的滚动列表，但也可以包括用户交互控件（如文本字段，切换开关，按钮等）。</p>
<p>我们可以通过将默认文本视图包装在内部来创建基本表单<code>Form</code>，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">Form</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实际上，您可以在表单中拥有任意数量的内容，尽管如果您打算添加10个以上的SwiftUI，则需要将它们成组放置以避免出现问题。</p>
<p>例如，此代码显示十行文本就好了：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但这尝试显示11，这是不允许的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong>如果您好奇为什么允许10行但不允许11行，则这是SwiftUI的局限性：它的编码方式是了解如何向表单添加一件事，如何向表单添加两件事，如何添加三件事，四件事，五件事等等，一直到十个，但不能超过–他们需要在某处画一条线。父级中的10个子成员的限制实际上适用于SwiftUI中的所有位置。</p>
<p>如果您想在表单中包含11件事，则应在内放置一些行<code>Group</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span> &#123;</span><br><span class="line">    <span class="type">Group</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Group</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组实际上并没有改变用户界面的外观，它们只是让我们解决了SwiftUI在父级内部限制了十个子视图的局限性–在这种情况下，即表单内的文本视图。</p>
<p>如果<em>希望</em>将表单项拆分为大块时看起来不同，则应改用<code>Section</code>视图。就像“设置”应用程序一样，这会将您的表单分成离散的可视组：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span> &#123;</span><br><span class="line">    <span class="type">Section</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Section</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将表单划分为多个部分时，没有硬性规定，只是在视觉上将相关项目分组。</p>
<h2 id="添加导航栏"><a href="#添加导航栏" class="headerlink" title="添加导航栏"></a>添加导航栏</h2><p>您可以通过如下所示的用户界面看到它的运行情况：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">Section</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>您会看到该表单从槽口下方开始，因此默认情况下，表单中的行是完全可见的。但是，表单也可以滚动，因此，如果您在模拟器中四处滑动，您会发现您可以将行向上移动，使其在时钟下运行，这使得它们都难以阅读。</p>
<p>解决此问题的常用方法是将导航栏放在屏幕顶部。导航栏可以具有标题和按钮，并且在SwiftUI中，它们还使我们能够在用户执行操作时显示新视图。</p>
<p>我们将在以后的项目中使用按钮和新视图，但我至少想向您展示如何添加导航栏并为其命名，因为它使我们的表单在滚动时看起来更好。</p>
<p>您已经看到，可以通过<code>Section</code>在文本视图周围添加文本视图来将文本视图放置在部分中，并且可以<code>Form</code>通过类似的方式将文本视图放置在区域中。嗯，我们以相同的方式添加了一个导航栏，只是在这里称为<code>NavigationView</code>。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">NavigationView</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">Section</span> &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通常，您需要在导航栏中放置某种标题，并且可以通过将<em>修饰符</em>附加到放置在其中的任何内容来实现。修饰符是常规方法，但有一点点不同：它们总是返回一个新的实例，无论您使用它们是什么。</p>
<p>让我们尝试添加一个修饰符来设置表单的导航栏标题：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NavigationView</span> &#123;</span><br><span class="line">    <span class="type">Form</span> &#123;</span><br><span class="line">        <span class="type">Section</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .navigationBarTitle(<span class="type">Text</span>(<span class="string">&quot;SwiftUI&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我们将<code>.navigationBarTitle()</code>修饰符附加到表单时，Swift实际上会创建一个新表单，该表单具有导航栏标题以及您提供的所有现有内容。</p>
<p>将标题添加到导航栏时，您会注意到它为该标题使用了大字体。您可以通过调用以下命令获得小字体<code>navigationBarTitle()</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarTitle(<span class="string">&quot;SwiftUI&quot;</span>, displayMode: .inline)</span><br></pre></td></tr></table></figure>

<p>您可以在“设置”应用程序中看到Apple如何使用这些大小标题：第一个屏幕以大文本显示“设置”，随后的屏幕以小文本显示其标题。</p>
<p>因为使用大标题非常普遍，所以可以使用一个快捷方式版本，该版本允许您使用纯字符串而不是文本视图：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarTitle(<span class="string">&quot;SwiftUI&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="修改程序状态"><a href="#修改程序状态" class="headerlink" title="修改程序状态"></a>修改程序状态</h2><p>在SwiftUI开发人员中，有一种说法是“视图是他们状态的函数”，但这虽然只是少数几个单词，但一开始对您可能毫无意义。</p>
<p>如果您正在玩格斗游戏，则可能会丧命，得一些分，收集一些财宝，甚至可能会捡起一些强大的武器。在编程中，我们称这些为<em>状态</em> -描述游戏当前<em>状态</em>的有效设置集合。</p>
<p>当您退出游戏时，该状态将被保存，并且当您稍后返回游戏时，您可以重新加载游戏以回到原来的状态。但是，<em>在</em>您玩游戏时，这全都叫做<em>state</em>：所有整数，字符串，布尔值等等，都存储在RAM中以描述您现在正在做什么。</p>
<p>当我们说SwiftUI的视图是其状态的函数时，是指用户界面的外观（人们可以看到的东西以及可以与之交互的东西）取决于程序的状态。例如，他们只有在文本字段中输入名称后才能点击继续。</p>
<p>这本身听起来似乎很明显，但这实际上与之前使用的替代方案有很大不同：您的用户界面由一系列事件决定。因此，用户现在看到的是因为他们已经使用您的应用程序一段时间了，利用了各种功能，可能已经登录或刷新了数据，等等。</p>
<p>“事件顺序”方法意味着很难存储应用程序的状态，因为获取完美状态的唯一方法是回放用户执行的事件的确切顺序。这就是为什么如此多的应用程序甚至根本不尝试保存状态的原因-您的新闻应用程序将不会返回到您正在阅读的上一篇文章，Twitter不会记住您是否正在键入内容。回复某人，Photoshop会忘记您堆积的任何撤消状态。</p>
<p>让我们通过一个按钮将其付诸实践，该按钮可以在SwiftUI中使用标题字符串和一个动作闭合来创建，该闭合在点击按钮时运行：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tapCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Tap Count: \(tapCount)&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.tapCount += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>该代码看起来足够合理：创建一个显示“点击计数”的按钮，再加上点击该按钮的次数，然后在<code>tapCount</code>每次点击该按钮时加1 。</p>
<p>但是，它不会建立。那不是有效的Swift代码。您看到的<code>ContentView</code>是一个结构，可以将其创建为常量。如果回想起当您了解结构时，这意味着它是<em>不可变的</em> –我们不能随意更改其值。</p>
<p>例如，在创建要更改属性的结构方法时，我们需要添加<code>mutating</code>关键字：<code>mutating func doSomeWork()</code>。但是，Swift不允许我们对计算的属性进行突变，这意味着我们不能编写<code>mutating var body: some View</code>-只是不允许这样做。</p>
<p>似乎我们陷入了僵局：我们希望能够在程序运行时更改值，但是Swift不允许我们这样做，因为我们的视图是结构。</p>
<p>幸运的是，Swift为我们提供了一个称为<em>属性包装器</em>的特殊解决方案：我们可以在属性之前放置一个特殊属性，以有效地赋予它们超能力。在存储简单的程序状态（如点击按钮的次数）的情况下，我们可以使用来自SwiftUI的名为的属性包装器<code>@State</code>，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> tapCount = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Button</span>(<span class="string">&quot;Tap Count: \(tapCount)&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.tapCount += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个小小的变化足以使我们的程序正常工作，因此您现在可以构建它并进行尝试。</p>
<p><code>@State</code>允许我们解决结构的局限性：我们知道由于结构是固定的，我们无法更改其属性，但<code>@State</code>允许该值由SwiftUI单独存储在<em>可以</em>修改的位置。</p>
<p>是的，感觉有点像作弊，您可能想知道为什么我们不使用类，而是<em>可以</em>自由修改它们。但是请相信我，这是值得的：随着您的进步，您将了解到SwiftUI经常破坏并重新创建您的结构，因此，保持它们的小巧和简单对结构的性能至关重要。</p>
<p><strong>提示：</strong>有几种方法可以在SwiftUI中存储程序状态，您将学习所有这些方法。<code>@State</code>专为存储在一个视图中的简单属性而设计。因此，Apple建议我们<code>private</code>向这些属性添加访问控制，如下所示：<code>@State private var tapCount = 0</code>。</p>
<h2 id="状态绑定控件"><a href="#状态绑定控件" class="headerlink" title="状态绑定控件"></a>状态绑定控件</h2><p>SwiftUI的<code>@State</code>属性包装器使我们可以自由地修改视图结构，这意味着随着程序的更改，我们可以更新视图属性以进行匹配。</p>
<p>但是，用户界面控件的操作要复杂一些。例如，如果您想创建一个用户可以键入的可编辑文本框，则可以创建一个SwiftUI视图，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">&quot;Enter your name&quot;</span>)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>试图创建一个包含文本字段和文本视图的表单。但是，该代码无法编译，因为SwiftUI想要知道将文本存储在文本字段中的位置。</p>
<p>请记住，视图是状态的函数-文本字段仅在反映了存储在程序中的值的情况下才能显示内容。SwiftUI想要的是结构中的字符串属性，该属性可以显示在文本字段中，并且还可以存储用户在文本字段中键入的内容。</p>
<p>因此，我们可以将代码更改为此：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">&quot;Enter your name&quot;</span>, text: name)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加一个<code>name</code>属性，然后使用它创建文本字段。但是，该代码<em>仍然</em>无法使用，因为Swift需要能够更新<code>name</code>属性以匹配用户在文本字段中键入的内容，因此您可以这样使用<code>@State</code>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> name = <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>但这还不够，我们的代码仍然无法编译。</p>
<p>问题在于，Swift区分“只读”和“读写”*。</p>
<p>对于我们的文本字段，Swift需要确保文本中的任何内容也位于该<code>name</code>属性中，以便它可以履行其承诺，即我们的视图是其状态的函数-用户看到的一切仅仅是代码中结构和属性的可见表示。</p>
<p>这就是所谓的<em>双向绑定</em>：我们绑定文本字段，以便它显示属性的值，但是我们也绑定它，以便对文本字段的任何更改也可以更新属性。</p>
<p>在Swift中，我们用特殊符号标记这些双向绑定，以便它们脱颖而出：我们在它们之前写一个美元符号。这告诉Swift，它应该读取该属性的值，但还应在发生任何更改时将其写回。</p>
<p>因此，我们的结构的正确版本是这样的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> name = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="type">TextField</span>(<span class="string">&quot;Enter your name&quot;</span>, text: $name)</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>立即尝试运行该代码-您应该会发现可以点击文本字段并输入您的姓名，这与预期的一样。</p>
<p>在继续之前，让我们修改文本视图，以便在其文本字段正下方显示用户名：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Text</span>(<span class="string">&quot;Your name is \(name)&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>请注意，它<code>name</code>是如何使用而不是<code>$name</code>？那是因为我们不想在这里进行双向绑定–我们想<em>读取</em>值，是的，但是我们不想以某种方式写回它，因为文本视图不会改变。</p>
<p>因此，当您在属性名称之前看到美元符号时，请记住，它会创建双向绑定：既读取属性值，又写入属性值。</p>
<h2 id="循环创建视图"><a href="#循环创建视图" class="headerlink" title="循环创建视图"></a>循环创建视图</h2><p>想要在一个循环中创建几个SwiftUI视图是很常见的。例如，我们可能想要遍历一系列名称，并让每个名称成为文本视图，或者遍历一系列菜单项，并将每个名称显示为图像。</p>
<p>SwiftUI为此提供了专用的视图类型，称为<code>ForEach</code>。这可以遍历数组和范围，并根据需要创建任意数量的视图。更好的是，<code>ForEach</code>如果我们手动输入视图，不会受到会影响我们的10视图限制的影响。</p>
<p><code>ForEach</code>将为它循环的每个项目运行一次闭包，并传入当前循环项目。例如，如果我们从0循环到100，它将传入0，然后是1，然后是2，依此类推。</p>
<p>例如，这将创建一个包含100行的表单：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; <span class="number">100</span>) &#123; number <span class="keyword">in</span></span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Row \(number)&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为<code>ForEach</code>传入了闭包，所以我们可以对参数名称使用简写语法，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span> &#123;</span><br><span class="line">    <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;Row \($0)&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ForEach</code>在使用SwiftUI的<code>Picker</code>视图时特别有用，它使我们可以显示各种选项供用户选择。</p>
<p>为了证明这一点，我们将定义一个视图：</p>
<ol>
<li>有可能的学生姓名数组。</li>
<li>具有<code>@State</code>存储当前所选学生的属性。</li>
<li>创建一个<code>Picker</code>视图，要求用户使用对该<code>@State</code>属性的双向绑定来选择自己喜欢的视图。</li>
<li>用于<code>ForEach</code>遍历所有可能的学生姓名，将其转换为文本视图。</li>
</ol>
<p>这是代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> students = [<span class="string">&quot;Harry&quot;</span>, <span class="string">&quot;Hermione&quot;</span>, <span class="string">&quot;Ron&quot;</span>]</span><br><span class="line">    @<span class="type">State</span> <span class="keyword">private</span> <span class="keyword">var</span> selectedStudent = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Picker</span>(<span class="string">&quot;Select your student&quot;</span>, selection: $selectedStudent) &#123;</span><br><span class="line">                <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; students.<span class="built_in">count</span>) &#123;</span><br><span class="line">                    <span class="type">Text</span>(<span class="keyword">self</span>.students[$<span class="number">0</span>])</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;You chose: Student # \(students[selectedStudent])&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那里没有很多代码，但是值得澄清一些事情：</p>
<ol>
<li>该<code>students</code>阵列不需要标明<code>@State</code>，因为它是一个常数; 它不会改变。</li>
<li>该<code>selectedStudent</code>属性以值0开头，但可以更改，这就是为什么将其标记为的原因<code>@State</code>。</li>
<li>该<code>Picker</code>有一个标签，“选择你的学生”，它告诉用户它做什么，并且还提供了一些描述性的屏幕阅读器大声朗读。</li>
<li>与<code>Picker</code>具有双向绑定<code>selectedStudent</code>，这意味着它将开始显示选择0，但随着用户移动选择器而更新属性。</li>
<li>在内部，<code>ForEach</code>我们从0到（但不包括）数组中的学生数量进行计数。</li>
<li>我们为每个学生创建一个文本视图，以显示该学生的姓名。</li>
</ol>
<p><code>ForEach</code>将来我们将探讨其他使用方式，但这对于该项目就足够了。</p>
<h2 id="TextField读取文本"><a href="#TextField读取文本" class="headerlink" title="TextField读取文本"></a>TextField读取文本</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Form</span>&#123;</span><br><span class="line">    <span class="type">Section</span>&#123;</span><br><span class="line">        <span class="type">TextField</span>(<span class="string">&quot;Amount&quot;</span>, text: $checkAmount)</span><br><span class="line">            .keyboardType(.decimalPad)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Section</span>&#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">&quot;$\(checkAmount)&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong>在<code>.numberPad</code>和<code>.decimalPad</code>键盘类型告诉SwiftUI 0到9以及可选的小数点，显示的数字，但这并不能阻止从用户<em>进入</em>其它值。例如，如果他们有一个硬件键盘，他们可以键入自己喜欢的东西，如果他们从其他地方复制一些文本，则无论该文本内部是什么，都可以将其粘贴到文本字段中。没关系-我们稍后将处理这种情况。</p>
<h2 id="列表形式创建选择器"><a href="#列表形式创建选择器" class="headerlink" title="列表形式创建选择器"></a>列表形式创建选择器</h2><p>SwiftUI的选择器有多种用途，它们的外观确切取决于您所使用的设备以及选择器所处的上下文。</p>
<p>在我们的项目中，我们有一个表格，要求用户输入支票的金额，我们想在其中添加一个选择器，以便他们可以选择共享支票的人数。</p>
<p>选择器（如文本字段）需要对属性进行双向绑定，以便它们可以跟踪其值。<code>@State</code>为此，我们已经创建了一个名为的属性<code>numberOfPeople</code>，因此我们的下一个工作是遍历2到99之间的所有数字，并将它们显示在选择器中。</p>
<p>修改表单的第一部分以包含一个选择器，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Section</span> &#123;</span><br><span class="line">    <span class="type">TextField</span>(<span class="string">&quot;Amount&quot;</span>, text: $checkAmount)</span><br><span class="line">        .keyboardType(.decimalPad)</span><br><span class="line"></span><br><span class="line">    <span class="type">Picker</span>(<span class="string">&quot;Number of people&quot;</span>, selection: $numberOfPeople) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">2</span> ..&lt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;\($0) people&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在，在模拟器中运行该程序并尝试一下-您注意到了什么？</p>
<p>希望您能发现几件事：</p>
<ol>
<li>会有一个新行，左边显示“ Number of people”，右边显示“ 4 people”。</li>
<li>右边缘有一个灰色的披露指示器，这是iOS发出信号的信号，表示点击该行会显示另一个屏幕。</li>
<li>点击该行<em>不会</em>显示其他屏幕。</li>
<li>该行显示“ 4个人”，但是我们为我们的<code>numberOfPeople</code>媒体资源设置了默认值2。</li>
</ol>
<p>因此，这有点“向前两步，向后两步” –我们取得了不错的结果，但是它不起作用，并且没有显示正确的信息！</p>
<p>我们将修复这两个问题，从简单的一个开始：我们给<code>numberOfPeople</code>默认值2 时为什么说4个人？好吧，在创建选择器时，我们使用了如下<code>ForEach</code>视图：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ForEach</span>(<span class="number">2</span> ..&lt; <span class="number">100</span>) &#123;</span><br></pre></td></tr></table></figure>

<p>从2到100计数，创建行。这意味着我们的第0行（即创建的第一行）包含“ 2人”，因此，当我们赋予<code>numberOfPeople</code>值2时，实际上是将其设置为<em>第三</em>行，即“ 4人”。</p>
<p>因此，尽管有点弯曲，但我们的UI显示“ 4个人”而不是“ 2个人”并不是一个错误。但是我们的代码中仍然存在一个大错误：为什么在该行上点击不执行任何操作？</p>
<p>如果您是在表单外部自行创建选择器，则iOS将显示旋转的选项。不过，在这里，我们告诉SwiftUI，这是一种供用户输入的表单，因此它自动更改了选择器的外观，从而不会占用太多空间。</p>
<p>SwiftUI <em>想要</em>做的事情-这也是为什么在行的右边缘添加了灰色显示指示器的原因-展示了一个带有我们选择器选项的新视图。为此，我们需要添加一个导航视图，该导航视图执行以下两项操作：在顶部留出一定空间以放置标题，并允许iOS根据需要在新视图中滑动。</p>
<p>因此，直接在表单add之前<code>NavigationView &#123;</code>，以及在表单的右括号之后添加另一个右括号。如果操作正确，则代码应如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">    <span class="type">NavigationView</span> &#123;</span><br><span class="line">        <span class="type">Form</span> &#123;</span><br><span class="line">            <span class="comment">// everything inside your form</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果再次运行该程序，则会在顶部看到一个较大的灰色空间，这是iOS为我们提供放置标题的空间。我们稍后会做，但是首先尝试点击“人数”行，您应该会看到一个新的屏幕幻灯片，其中包含所有其他可能的选项供您选择。</p>
<p>您应该看到“ 4人”旁边有一个复选标记，因为它是选定的值，但是您也可以点击另一个数字-屏幕将自动再次滑开，使用户以他们的新选择回到上一个屏幕。</p>
<p>您在这里看到的是所谓的<em>声明性用户界面设计</em>的重要性。这意味着我们说我们想要<em>什么</em>，而不是说应该<em>怎么</em>做。我们说过我们想要一个内部带有一些值的选择器，但是要由SwiftUI来决定轮式选择器还是滑动视图方法更好。之所以选择滑动视图方法，是因为选择器位于表单内部，但是在其他平台和环境上，它可以选择其他内容。</p>
<p>在完成此步骤之前，让我们为该新导航栏添加标题。给表单添加以下修饰符：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.navigationBarTitle(<span class="string">&quot;WeSplit&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong>很容易想到修饰符应附加到的末尾<code>NavigationView</code>，但需要将其附加到末尾<code>Form</code>。其原因是，导航视图能够显示你的程序运行很多意见，所以由标题附加到的东西<em>里面</em>我们允许iOS系统改变标题自由导航视图。</p>
<h2 id="添加分段控件"><a href="#添加分段控件" class="headerlink" title="添加分段控件"></a>添加分段控件</h2><p>现在，我们将第二个选择器视图添加到我们的应用程序中，但是这次我们希望有所不同：我们需要一个<em>分段控件</em>。这是一种特殊的选择器，可在水平列表中显示一些选项，当您只有很少的选择时，它会很好用。</p>
<p>我们的表单已经有两个部分：一个是关于人数和人数的，另一个是我们将显示最终结果的部分–目前只是显示<code>checkAmount</code>，但我们将尽快对其进行修复。</p>
<p>在这两个部分的中间，我希望您添加第三个部分以显示小费百分比：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Section</span> &#123;</span><br><span class="line">    <span class="type">Picker</span>(<span class="string">&quot;Tip percentage&quot;</span>, selection: $tipPercentage) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; tipPercentages.<span class="built_in">count</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;\(self.tipPercentages[$0])%&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这将遍历<code>tipPercentages</code>数组中的所有选项，并将每个选项转换为文本视图。就像以前的选择器一样，SwiftUI会将其转换为列表中的一行，并在点击时在其中滑动新的选项屏幕。</p>
<p>不过，在这里，我想向您展示如何使用分段控件，因为它看起来要好得多。因此，请将此修饰符添加到提示选择器中：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.pickerStyle(<span class="type">SegmentedPickerStyle</span>())</span><br></pre></td></tr></table></figure>

<p>这应该在选择器的右括号结尾处进行，如下所示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Section</span> &#123;</span><br><span class="line">    <span class="type">Picker</span>(<span class="string">&quot;Tip percentage&quot;</span>, selection: $tipPercentage) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; tipPercentages.<span class="built_in">count</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;\(self.tipPercentages[$0])%&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .pickerStyle(<span class="type">SegmentedPickerStyle</span>())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果现在运行该程序，您会发现事情开始融合起来：用户现在可以在支票上输入金额，选择人数，然后选择要留下多少小费–不错！</p>
<p>是的，<em>我们</em>知道他们要选择留下多少小费，但这在屏幕上并不明显。我们可以而且<em>应该</em>做得更好。</p>
<p>一种选择是在分段控件之前直接添加另一个文本视图，我们可以这样做：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Section</span> &#123;</span><br><span class="line">    <span class="type">Text</span>(<span class="string">&quot;How much tip do you want to leave?&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="type">Picker</span>(<span class="string">&quot;Tip percentage&quot;</span>, selection: $tipPercentage) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; tipPercentages.<span class="built_in">count</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;\(self.tipPercentages[$0])%&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .pickerStyle(<span class="type">SegmentedPickerStyle</span>())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以，但是看起来并不好–看起来它本身就是一个项目，而不是分段控件的标签。</p>
<p>一个更好的主意是修改该部分本身：SwiftUI允许我们向部分的页眉和页脚添加视图，在这种情况下，我们可以使用它添加一个小的说明性提示。实际上，我们可以使用刚创建的相同文本视图，只是将其向上移为section标题，而不是其中的松散标签。</p>
<p>这就是代码中的样子：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Section</span>(header: <span class="type">Text</span>(<span class="string">&quot;How much tip do you want to leave?&quot;</span>)) &#123;</span><br><span class="line">    <span class="type">Picker</span>(<span class="string">&quot;Tip percentage&quot;</span>, selection: $tipPercentage) &#123;</span><br><span class="line">        <span class="type">ForEach</span>(<span class="number">0</span> ..&lt; tipPercentages.<span class="built_in">count</span>) &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">&quot;\(self.tipPercentages[$0])%&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .pickerStyle(<span class="type">SegmentedPickerStyle</span>())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是对代码的很小的改动，但是我认为最终结果看起来要好得多-文本现在看起来像是在其正下方的分段控件的提示。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/iOS/" rel="tag"># iOS</a>
              <a href="/tags/swift/" rel="tag"># swift</a>
              <a href="/tags/SwiftUI/" rel="tag"># SwiftUI</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/06/20/%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E8%84%9A%E6%9C%AC/" rel="prev" title="文件格式转换脚本">
      <i class="fa fa-chevron-left"></i> 文件格式转换脚本
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/06/25/SwiftUI-%E4%BA%8C-%E2%80%94%E2%80%94Gusee-the-Flag/" rel="next" title="SwiftUI(二)——Gusee the Flag">
      SwiftUI(二)——Gusee the Flag <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.</span> <span class="nav-text">创建项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E6%96%87%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">初始文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%8D%95"><span class="nav-number">3.</span> <span class="nav-text">创建表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="nav-number">4.</span> <span class="nav-text">添加导航栏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%A8%8B%E5%BA%8F%E7%8A%B6%E6%80%81"><span class="nav-number">5.</span> <span class="nav-text">修改程序状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E7%BB%91%E5%AE%9A%E6%8E%A7%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">状态绑定控件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="nav-number">7.</span> <span class="nav-text">循环创建视图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TextField%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC"><span class="nav-number">8.</span> <span class="nav-text">TextField读取文本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E5%BD%A2%E5%BC%8F%E5%88%9B%E5%BB%BA%E9%80%89%E6%8B%A9%E5%99%A8"><span class="nav-number">9.</span> <span class="nav-text">列表形式创建选择器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%86%E6%AE%B5%E6%8E%A7%E4%BB%B6"><span class="nav-number">10.</span> <span class="nav-text">添加分段控件</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">wshenY</p>
  <div class="site-description" itemprop="description">There are a lot of stories</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">26</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/malbeshaba" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;malbeshaba" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/6140508803" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;6140508803" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wshenY</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
